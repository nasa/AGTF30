<script type="text/javascript"
     src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<head>
    <link rel="stylesheet" href="stylesheet_TMATS.css">
</head>

<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<title>
    T-MATS: Help for Pipe Library Block
</title>

<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<body>
    <h1>
      T-MATS: Pipe Library Block
    </h1>
<hr>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<div class="purpose">
        Purpose
</div>

<p>
    This block is used to model the thermodynamic properties and mass flow rate of circular cross section pipes.
</p>

<br>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<div class="background">
        Background
</div>

<p>
    To compute the mass flow rate and fluid properties of a fully developed incompressible and Newtonian fluid, this block utilizes predefined fluid property lookup tables and classic mean flow calculations as seen in the equations below.

    <br>
    <br>

Pipe flow is either laminar or turbulent as defined by the Reynolds number. Flows with a Reynolds number less than 1200 are classically defined as laminar, transitional between Reynolds numbers from 1200 to 2000, and turbulent when a Reynolds number exceeds 2000.
Flow direction is defined by the pressure differenetial between the enterance and exit of the pipe. Fluid properties at the enterance and exit are looked up using the predefined lookup tables. From these lookup tables mass flow rates for both laminar and turbulent flows are calculated based on the equations below:
<h2>
    Laminar Flow
</h2>
<br> Laminar flow calculation based on the Hagan-Poiseuille law:
$$ W_{lam} = \frac{dP*\rho_{In}*\pi*(D/2)^4}{8*\mu_{In}*L} $$

$$ R_{lam} = \frac{4*W_{lam}}{\pi*\mu_{In}*D} $$
<h2>
    Turbulent
</h2>
<br> Turbulent flow calculation based on the Darcy–Weisbach equation:
$$\frac{dP}{L} = f\frac{\rho*\bar{u}^2}{2*D}$$
<br> where <i>f</i> is defined according to the Blasius correlation
$$f = \frac{0.3164}{R^{0.25}} $$
<br> and Reynolds number is defined as:
$$R_{tur} = \frac{4*W_{tur}}{\pi* \mu* D}$$
<br> Fully developed turbulent flow equation:
$$ W_{tur} = \rho_{In}*\left( \frac{dP*D^{4.75}}{0.242*L*\mu_{In}^{0.25}*\rho_{In}^{0.75}} \right) ^{\frac{1}{1.75}} $$

</p>

<br>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<div class="instructions">
        Instructions
</div>

<p>
    To use this block:
    <ul>
        <li> Connect the inputs of; upstream flow properties, independent variables pressure and enthalpy to the corresponding ports.
        <li> Connect the outputs of; downstream flow properties and independent variable enthaply to the output ports.
        <li> Click on the mask to provide inputs for pipe diameter (D) and pipe length (L)
    </ul>
</p>


<br><hr><br>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<div class="inputs">
        Pipe Inputs
</div>

<table>
    <tr><th> Input </th><th> Description </th></tr>
    <tr><td> Inflow </td><td>Properties of inflow 4x1 bus of:
    <br> ht - enthalp \( [\frac{BTU}{lbm}]\)
    <br> Tt - temperature [<i>Rankine</i>]
    <br> Pt - pressure \([\frac{lb}{in^3}]\)
    <br> FAR - fuel to air ratio [N/A]</td></tr>
    <tr><td> Pressure </td><td>Independent pressure at exit of pipe \([\frac{lbm}{in^3}]\)</td></tr>
    <tr><td> Enthalpy </td><td>Independent enthalpy at exit of pipe \([\frac{BTU}{lbm}]\)</td></tr>
</table>

<br><br>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<div class="outputs">
        Pipe Outputs
</div>

<table>
    <tr><th> Output </th><th> Description </th></tr>
    <tr><td>Outflow</td><td>Properties of inflow 5x1 bus of:
    <br> W - mass flow rate \( [\frac{lbm}{sec}]\)
    <br> ht - enthalp [\( \frac{BTU}{lbm}\)]
    <br> Tt - temperature [<i>Rankine</i>]
    <br> Pt - pressure \([\frac{lb}{in^3}]\)
    <br> FAR - fuel to air ratio [N/A]</td></tr>
    <tr><td> Enthalpy </td><td>Independent enthalpy at exit of pipe \( [\frac{BTU}{lbm}]\)</td></tr>
</table>

<br><br>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<div class="maskvars">
        Pipe Mask Variables
</div>

<table>
    <tr><th> Mask Variable </th><th> Description </th></tr>
    <tr><td> D </td><td> Inside diameter of pipe \( [in]\) </td></tr>
    <tr><td> L </td><td> Length of pipe \( [in]\) </td></tr>
    <tr><td> htVec_M </td><td> Enthalpy vector for table lookup \( [\frac{BTU}{lbm}]\)</td></tr>
    <tr><td> PtVec_M </td><td>Pressure vector for table lookup \([\frac{lb}{in^2}]\)</td></tr>
    <tr><td> TtArray_M </td><td>Total temperature array a function of enthalpy and pressure f(ht,Pt) \( [Rankine]\)</td></tr>
    <tr><td> rhoArray_M </td><td>Density array a function of enthalpy and pressure f(ht,Pt) \( [\frac{lbm}{in^3}]\)</td></tr>
</table>


<br><hr><br>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<div class = "errors">
    Potential Errors
</div>
<p>
When using this block, you may receive one of the following errors/warnings. The table
below lists the errors/warnings that you may see and the reason why it is being displayed.
</p>
<table>
    <tr><th> Error/Warning </th><th>Description</th></tr>
    <tr><td>...</td><td>...</td></tr>
    <tr><td>...</td><td>...</td></tr>
</table>




<br><br>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
</body>